$(function(){Metronic.init();Layout.init();QuickSidebar.init();Demo.init();$("#storeType").attr("disabled","disabled");$(".date-picker").datepicker({rtl:Metronic.isRTL(),orientation:"left",autoclose:true});$("#cancle").click(function(){history.go(-1)});$.validator.addMethod("isLegalCard",function(k,j){var i=/^(\d{15}$|^\d{18}$|^\d{17}(\d|X|x))$/;return this.optional(j)||(i.test(k))},"身份证格式错误");$("#form").validate({event:"blur",rules:{merchantNo:{required:true,maxlength:25},storeNo:{required:true,maxlength:25},storeName:{required:true,maxlength:25},storeType:{required:true,maxlength:25},servicePhone:{required:true,maxlength:25},serviceBegin:{required:true,maxlength:25},serviceEnd:{required:true,maxlength:25},storeAddress:{required:true,maxlength:25},storeAddressImg:{required:true,maxlength:25},storeDesc:{required:true,maxlength:25},licenseName:{required:true,maxlength:25},name:{required:true,maxlength:25},idCard:{required:true,isLegalCard:true,maxlength:25},idcardImg1:{required:true,maxlength:25},idcardImg2:{required:true,maxlength:25},idcardImg3:{required:true,maxlength:25},merchantLicense:{required:true,maxlength:25},merchantLicenseImg:{required:true,maxlength:25},storePhotosImg:{required:true,maxlength:25},groupPhotoImg:{required:true,maxlength:25},storeImg:{required:true,maxlength:25},isPhoto:{required:true,maxlength:25},auditOperator:{required:true,maxlength:25},auditReson:{required:true,maxlength:25},storeStatus:{required:true,maxlength:25},temp1:{required:true,maxlength:25},temp2:{required:true,maxlength:25},temp3:{required:true,maxlength:25},temp4:{required:true,maxlength:25}},messages:{merchantNo:{required:"请输入【商户编号】",maxlength:"长度不能超过25"},storeNo:{required:"请输入【门店编号】",maxlength:"长度不能超过25"},storeName:{required:"请输入【门店名称】",maxlength:"长度不能超过25"},storeType:{required:"请输入【门店级别】",maxlength:"长度不能超过25"},servicePhone:{required:"请输入【服务电话】",maxlength:"长度不能超过25"},serviceBegin:{required:"请输入【营业开始时间】",maxlength:"长度不能超过25"},serviceEnd:{required:"请输入【营业结束时间】",maxlength:"长度不能超过25"},storeAddress:{required:"请输入【门店地址】",maxlength:"长度不能超过25"},storeAddressImg:{required:"请输入【门店地址图片】",maxlength:"长度不能超过25"},storeDesc:{required:"请输入【门店介绍】",maxlength:"长度不能超过25"},licenseName:{required:"请输入【执照名称】",maxlength:"长度不能超过25"},name:{required:"请输入【法人姓名】",maxlength:"长度不能超过25"},idCard:{required:"请输入【身份证号】",maxlength:"长度不能超过25"},merchantLicense:{required:"请输入【营业执照号】",maxlength:"长度不能超过25"},isPhoto:{required:"请输入【相册照片】",maxlength:"长度不能超过25"},auditOperator:{required:"请输入【审核人】",maxlength:"长度不能超过25"},auditReson:{required:"请输入【审核理由】",maxlength:"长度不能超过25"},storeStatus:{required:"请输入【门店状态 】",maxlength:"长度不能超过25"}},submitHandler:function(m){if(!/^([0-1]?[0-9]|2[0-3]):([0-5][0-9])$/.test($("#serviceBegin").val())){bootbox.alert("营业开始时间格式有误，需要满足格式如：01:20",function(){});return}if(!/^([0-1]?[0-9]|2[0-3]):([0-5][0-9])$/.test($("#serviceEnd").val())){bootbox.alert("营业结束时间格式有误，需要满足格式如：01:20",function(){});return}if(!/\d{7,11}/.test($("#servicePhone").val())){bootbox.alert("电话格式有误.",function(){});return}$("#save").attr("disabled","disabled");var i=0;var l="";if(i==0){var k=$("#baseUrl").text().trim();var j=$("#form").serialize()+"&storeType="+$.trim($("#storeType").val());$.ajax({url:k+"/adminManage/merchantstore/save",data:j,type:"POST",success:function(n){n=$.parseJSON(n);sweetRedirect(n,n.url)},error:function(n,p,o){$("#save").removeAttr("disabled")}})}else{$("#save").removeAttr("disabled");bootbox.alert(l,function(){})}return false},errorPlacement:function(i,j){i.appendTo(j.parent().parent())}});var g=$("select.form-control");for(var b=0;b<g.size();b++){var d=$(g[b]);var h=d.attr("id");var f=$("."+h).val();var c=d.find("option");for(var a=0;a<c.size();a++){var e=$(c[a]).val();if(e==f){$(c[a]).attr("selected","selected")}else{$(c[a]).removeClass("selected")}}}if(!$("#id").val()){$($("#storeType option").removeAttr("selected")[2]).attr("selected","selected")}});